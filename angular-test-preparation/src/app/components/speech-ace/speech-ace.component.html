<h2>üé§ SpeechAce - Pr√°ctica de Examen de Ingl√©s</h2>
<p>Selecciona una pregunta y practica tu respuesta con el cron√≥metro de 4 minutos.</p>

<div class="card" *ngIf="!selectedQuestion">
  <h3>Preguntas Disponibles</h3>
  <ul class="questions-list">
    <li 
      class="question-item" 
      *ngFor="let question of questions"
      (click)="selectQuestion(question)">
      {{ question.id }}. {{ question.title }}
    </li>
  </ul>
</div>

<div class="card" *ngIf="selectedQuestion">
  <h3>{{ selectedQuestion.title }}</h3>
  
  <div *ngIf="showTimer && timeConfig">
    <div class="timer" [ngClass]="getTimerClass()">
      {{ formatTime(timeRemaining) }}
    </div>

    <div class="time-segments">
      <div 
        class="time-segment" 
        *ngFor="let segment of timeSegments"
        [class.active]="currentSegment === segment.name">
        <h4>{{ segment.label }}</h4>
        <p>{{ segment.description }}</p>
        <small>{{ segment.duration }}s</small>
      </div>
    </div>
  </div>

  <div class="controls">
    <button 
      *ngIf="showTimer"
      class="btn" 
      [ngClass]="isTimerRunning ? 'btn-danger' : 'btn-success'"
      (click)="startTimer()">
      {{ isTimerRunning ? '‚è∏ Pausar' : '‚ñ∂ Iniciar' }}
    </button>
    <button 
      *ngIf="showTimer"
      class="btn btn-secondary" 
      (click)="resetTimer()">üîÑ Reiniciar</button>
    <button class="btn btn-secondary" (click)="selectedQuestion = null">‚Üê Volver a Preguntas</button>
  </div>

  <div class="answer-display" id="answer-container">
    <h4>Respuesta de Ejemplo:</h4>
    <div class="answer-paragraphs">
      <div 
        *ngFor="let paragraph of answerParagraphs; let i = index"
        class="paragraph-wrapper"
        [id]="'paragraph-' + i"
        [class.current-paragraph]="i === currentParagraphIndex"
        [class.read-paragraph]="i < currentParagraphIndex"
        [class.time-ahead]="showTimer && getParagraphTimeStatus(i) === 'ahead'"
        [class.time-behind]="showTimer && getParagraphTimeStatus(i) === 'behind'"
        [class.time-on-time]="showTimer && getParagraphTimeStatus(i) === 'on-time'">
        <p class="paragraph-text">{{ paragraph }}</p>
        <div *ngIf="showTimer && isTimerRunning" class="paragraph-time-indicator">
          <span [class]="'time-badge ' + getParagraphTimeStatus(i)">
            {{ formatParagraphTime(getRemainingTimeForParagraph(i)) }}
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
